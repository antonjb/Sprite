/*
 * Elf
 * Anton Ball
 * MIT license
 * @license
 */
!function(e){"use strict";var n="1.0.0",i=function(){};var t=function(e,n){var i=[];for(var t=0;t<n;t+=1){i.push([t*e.width,0,e.width,e.height])}return i},a=function(){var e=typeof arguments[0]==="object"?arguments[0]:{},n=arguments.length,i,t,a;for(i=0;i<n;i+=1){t=arguments[i];if(t!==null){for(a in t){e[a]=t[a]}}}return e},o=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r=function(e){return Object.prototype.toString.call(e)=="[object Array]"};!function(){var e=0,n=["ms","moz","webkit","o"];for(var i=0;i<n.length&&!window.requestAnimationFrame;++i){window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(n,i){var t=(new Date).getTime(),a=Math.max(0,16-(t-e)),o=window.setTimeout(function(){n(t+a)},a);e=t+a;return o}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){clearTimeout(e)}}}();var m=function(e,n){if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&!(window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame)&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setInterval(e,n);var i=(new Date).getTime(),t={};function a(){t.value=requestAnimationFrame(a);var o=(new Date).getTime(),r=o-i;if(r>=n){e.call();i=(new Date).getTime()}}t.value=requestAnimationFrame(a);return t};var s=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):window.clearInterval(e)};var u=function(e,n,w){var l=false,c=0,f,h,F;this.el=e;this.options=a({},u.defaults,w);this.numFrames=n.length?n.length:Math.floor(w.imageWidth/n.width)*Math.floor(w.imageHeight/n.height);f=!r(n)?t(n,this.numFrames):n;var d=function(e){this.el.style.backgroundPosition=-e[0]+"px "+-e[1]+"px"};this.isPlaying=function(){return l};this.frame=function(e){if(o(e)&&c!==e){c=e<this.numFrames?e:c;d.call(this,f[c])}return c};this.play=function(e){if(l){return this}var n=a({onComplete:i,onFrame:i},this.options,e),t=this,o=n.reverse?f.slice(0).reverse():f,r=0;F=0;c=this.frame(n.from||c);var s=function(){d.call(t,o[c]);c=(c+=1)%t.numFrames;n.onFrame.call(t,c,r);if(c===0){r+=1;if(!n.loop||r===n.loop){t.stop();n.onComplete.call(t)}}F+=1};l=true;h=m(s,1e3/n.fps);return this};this.stop=function(e,n,t){if(!l){return this}var a=this;t=t||i;s(h);l=false;if(e&&!n){this.frame(e)}else if(e&&n){this.play({from:c,onFrame:function(n){if(e===n){a.stop();t.call(a)}}})}return this}};u.toString=function(){return"Sprite version "+this.version};u.version=n;u.defaults={fps:12,loop:true,reverse:false};e.Sprite=u}(this);